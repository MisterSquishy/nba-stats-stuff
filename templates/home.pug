div(class="main container-fluid text-center")
    div(class="choicesdiv")
        select(id="teamselect" class="form-control")
            option(value="DavidsTheYounger") Davids The Younger
            option(value="DavidsTheWiser") Davids The Wiser
    div(class="tablediv")
      table(id="statstable" class="display" width="100%")
script(src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript")
link(href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css")
script(src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" type="text/javascript")
script.
  window.onload = function() {
    var headers = JSON.parse("#{headers}".replace(/&quot;/g,'"'));
    var fullResults = JSON.parse("#{rowSet}".replace(/&quot;/g,'"'));
    var teamRosters = JSON.parse("#{teamRosters}".replace(/&quot;/g,'"'));
    var filteredResults = fullResults;
    var table = $('#statstable').DataTable( {
      columns: headers,
      data: filteredResults
    });
    $('#teamselect').change(function() {
      filteredResults = [];
      var roster = teamRosters[$("option:selected", this)[0].value];
      for (var i in fullResults) {
        if (roster.includes(fullResults[i][0])) {
          filteredResults.push(fullResults[i]);
        }
      }
      table.destroy();
      table = $('#statstable').DataTable( {
        columns: headers,
        data: filteredResults
      });
    });
  };
